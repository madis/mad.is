desc "Make sure local git is in sync with remote."
task :check_git_revision do
  on roles(:app) do
    unless `git rev-parse HEAD` == %x(git rev-parse origin/#{fetch(:branch)}) #`git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
end
before "deploy:starting", "check_git_revision"
